{
  "type": "object",
  "hasStep": true,
  "form_title": "joint_secondary",
  "required": ["joint_account_name"],
  "properties": {
    "first_name": {
      "type": "string",
      "title": "First Name",
      "group": "Personal Information",
      "hideTitle": true,
      "pattern": "^[a-zA-Z/.-]*$",
      "errorMessage": {
        "pattern": "Alphabets and . only"
      }
    },
    "middle_name": {
      "type": "string",
      "title": "Middle Name",
      "group": "Personal Information",
      "hideTitle": true,
      "pattern": "^[a-zA-Z\\s]*$",
      "errorMessage": {
        "pattern": "Alphabets and spaces only"
      }
    },

    "last_name": {
      "type": "string",
      "title": "Last Name",
      "group": "Personal Information",
      "hideTitle": true,
      "pattern": "^[a-zA-Z\\s/.]*$",
      "errorMessage": {
        "pattern": "Alphabets and spaces only"
      }
    },
    "joint_account_name": {
      "type": "string",
      "title": "Joint Account Name",
      "width": "half",
      "group": "Joint",
      "readOnly": true,
      "hideTitle": true
    },
    "is_minor_account": {
      "type": "boolean",
      "title": "Is Minor Account?",
      "group": "Joint",
      "readOnly": true,
      "hideTitle": true
    },
    "account_info": {
      "type": "string",
      "title": "Joint Account Name",
      "width": "half",
      "group": "Joint",
      "readOnly": true,
      "hideTitle": true
    },

    "joint_details": {
      "type": "array",
      "minItems": 1,
      "group": "Secondary Account Joint Information",
      "width": "full",
      "buttonWidth": "full",
      "items": {
        "type": "object",
        "required": [
          "first_name",
          "last_name",
          "father_name",
          "grandfather_name",
          "date_of_birth_ad",
          "date_of_birth_bs",
          "dedup_identification",
          "dedup_id_number",
          "existing_permanent_address",
          "family_account_holder",
          "relation_with_account_holder",
          "hpp",
          "pep",
          "adverse_media",
          "family_pep_declaration",
          "loan_status",
          "is_blacklisted",
          "customer_introduce_by",
          "met_in_person"
        ],

        "properties": {
          "has_cif": {
            "type": "boolean",
            "title": "Has CIF Number?",
            "group": "CIF Enquiry",
            "hideTitle": true,
            "readOnly": true,
            "default": true,
            "width": 4
          },
          "cif_data": {
            "type": "string",
            "group": "CIF Enquiry"
          },

          "first_name": {
            "type": "string",
            "title": "First Name",
            "group": "Customer Information",
            "pattern": "^[a-zA-Z.()]*$",
            "errorMessage": {
              "pattern": "Alphabets, brackets ( ), and dot (.) only allowed"
            }
          },
          "middle_name": {
            "type": "string",
            "title": "Middle Name",
            "group": "Customer Information",
            "pattern": "^[a-zA-Z\\s.()]*$",
            "errorMessage": {
              "pattern": "Alphabets, spaces, brackets ( ), and dot (.) only allowed"
            }
          },
          "last_name": {
            "type": "string",
            "title": "Last Name",
            "group": "Customer Information",
            "connect": "last_name_not_available",
            "pattern": "^[a-zA-Z\\s.()/]*$",
            "errorMessage": {
              "pattern": "Alphabets, spaces, brackets ( ), and dot (.) only allowed"
            }
          },

          "last_name_not_available": {
            "type": "boolean",
            "title": "Is last name not available ?",
            "group": "Customer Information"
          },
          "father_name": {
            "type": "string",
            "title": "Father Name",
            "group": "Customer Information",
            "pattern": "^[a-zA-Z\\s.()]*$",
            "errorMessage": {
              "pattern": "Alphabets, spaces, brackets ( ), and dot (.) only allowed"
            }
          },
          "grandfather_name": {
            "type": "string",
            "title": "Grandfather Name",
            "group": "Customer Information",
            "pattern": "^[a-zA-Z\\s.()]*$",
            "errorMessage": {
              "pattern": "Alphabets, spaces, brackets ( ), and dot (.) only allowed"
            }
          },

          "date_of_birth_ad": {
            "type": "string",
            "group": "Customer Information",
            "title": "Date of Birth (A.D.)"
          },
          "date_of_birth_bs": {
            "type": "string",
            "group": "Customer Information",
            "title": "Date of Birth (B.S.)"
          },
          "dedup_identification": {
            "type": "string",
            "title": "Identification",
            "group": "Customer Information"
          },

          "dedup_id_number": {
            "type": "string",
            "title": "Identification Number",
            "group": "Customer Information",
            "pattern": "^(?!.*//)(?!.*--)(?!.*\\(\\()(?!.*\\)\\))[0-9a-zA-Z/().-]*$",
            "errorMessage": {
              "pattern": "Only alphanumeric characters and single symbols [/, -, ., ()] are allowed."
            }
          },
          "existing_permanent_address": {
            "type": "string",
            "title": "Existing Permanent Address",
            "group": "Customer Information"
          },

          "family_account_holder": {
            "type": "string",
            "title": "Is s/he family member of account holder?",
            "enum": ["Yes", "No"],
            "group": "Customer Information"
          },
          "relation_with_account_holder": {
            "type": "string",
            "title": "Relationship with the Account holder ?",
            "group": "Customer Information"
          },

          "dedup_check": {
            "type": "string",
            "title": "Preliminary Screening",
            "group": "Customer Information",
            "width": "full",
            "additionalProperties": true
          },

          "dedup_module_data": {
            "type": "string",
            "width": "full",
            "additionalProperties": true,
            "columns": [
              {
                "key": "full_name",
                "label": "Name"
              },
              {
                "key": "cif_number",
                "label": "Cif Number"
              }
            ],
            "actions": [
              {
                "label": "View",
                "icon": "view",
                "tooltip": "View Detail",
                "actionKey": "view"
              }
            ]
          },

          "personal_screening_data": {
            "type": "string",
            "width": "full",
            "group": "",
            "additionalProperties": true,
            "columns": [
              { "key": "name", "label": "Name" },
              { "key": "father_name", "label": "Father Name" },
              { "key": "similarity", "label": "Similarity" }
            ],
            "actions": [
              {
                "label": "View",
                "icon": "view",
                "tooltip": "View Detail",
                "actionKey": "view"
              }
            ]
          },
          "hpp": {
            "type": "string",
            "title": "Highly Positioned Person (HPP) ?",
            "group": "Declaration",
            "enum": ["Yes", "No"],
            "default": "No"
          },
          "pep": {
            "type": "string",
            "title": "Politically Exposed Person (PEP) ?",
            "group": "Declaration",
            "enum": ["Yes", "No"],
            "default": "No"
          },

          "family_pep_declaration": {
            "type": "string",
            "title": "Customer declares family member as PEP or as associate PEP ?",
            "group": "Declaration",
            "enum": ["Yes", "No"],
            "width": 10
          },
          "adverse_media": {
            "type": "string",
            "title": "Adverse Media",
            "group": "Declaration",
            "enum": ["Yes", "No"]
          },

          "loan_status": {
            "type": "string",
            "title": "Has the customer taken any loan with us in the past ?",
            "group": "statusOfClient",
            "enum": ["Yes", "No"],
            "width": 8
          },
          "is_blacklisted": {
            "type": "string",
            "title": "Has the customer being blacklisted by us ?",
            "group": "statusOfClient",
            "enum": ["Yes", "No"],
            "width": 8,
            "default": "No"
          },
          "customer_introduce_by": {
            "type": "string",
            "title": "Introducer Name",
            "group": "statusOfClient",
            "enum": [
              "Bank Staff",
              "Other Account Holder",
              "Walk-in Customer",
              "Local Government Bodies"
            ],
            "width": 8
          },

          "met_in_person": {
            "type": "string",
            "title": "Has the customer been met in-person (face-to-face) ?",
            "group": "statusOfClient",
            "enum": ["Yes", "No"],
            "width": 8
          },
          "risk_level": {
            "type": "string",
            "group": "Risk",
            "title": "Risk Level",
            "enum": ["Low Risk", "Medium Risk", "High Risk"],
            "readOnly": true
          },
          "is_high_risk_account": {
            "type": "string",
            "title": "Is High Risk Account?",
            "enum": ["Yes", "No"],
            "group": "Risk",
            "readOnly": true
          },
          "calculate_risk": {
            "type": "string",
            "title": "Calculate Risk",
            "group": "Risk"
          },

          "screening_ref_code": {
            "type": "string",
            "width": "full",
            "title": "Screening",
            "group": ""
          }
        },

        "dependencies": {
          "has_cif": {
            "if": {
              "properties": {
                "has_cif": {
                  "const": true
                }
              }
            },
            "then": {
              "properties": {
                "cif_number": {
                  "type": "string",
                  "title": "CIF Number",
                  "group": "CIF Enquiry",
                  "hideTitle": true
                },
                "cif_enquiry": {
                  "type": "string",
                  "title": "Proceed",
                  "group": "CIF Enquiry",
                  "hideTitle": true
                }
              },
              "required": ["cif_number"]
            }
          },
          "last_name_not_available": {
            "if": {
              "properties": {
                "last_name_not_available": {
                  "const": true
                }
              }
            },
            "then": {
              "properties": {
                "last_name": {
                  "readOnly": true
                }
              }
            },
            "else": {
              "properties": {
                "last_name": {
                  "readOnly": false
                }
              }
            }
          },
          "hpp": {
            "if": {
              "properties": {
                "hpp": {
                  "enum": ["Yes"]
                }
              }
            },
            "then": {
              "properties": {
                "hpp_category": {
                  "type": "string",
                  "title": "HPP Category",
                  "group": "Declaration"
                }
              },
              "required": ["hpp_category"],
              "dependencies": {
                "hpp_category": {
                  "if": {
                    "properties": {
                      "hpp_category": {
                        "enum": ["CDHPP", "PDHPP"]
                      }
                    }
                  },
                  "then": {
                    "properties": {
                      "hpp_sub_category": {
                        "type": "string",
                        "title": "HPP Sub Category",
                        "group": "Declaration"
                      }
                    },
                    "required": ["hpp_sub_category"]
                  }
                }
              }
            }
          },
          "pep": {
            "if": {
              "properties": {
                "pep": {
                  "enum": ["Yes"]
                }
              }
            },
            "then": {
              "properties": {
                "pep_category": {
                  "type": "string",
                  "enum": [
                    "Existing PEPs",
                    "Former PEPs",
                    "High-ranking officials from neighboring or nearby countries",
                    "Other foreign PEPs",
                    "International PEPs"
                  ],
                  "title": "Pep Category",
                  "group": "Declaration"
                }
              },
              "required": ["pep_category"]
            }
          },
          "adverse_media": {
            "if": {
              "properties": {
                "adverse_media": {
                  "enum": ["Yes"]
                }
              }
            },
            "then": {
              "properties": {
                "adverse_category": {
                  "type": "string",
                  "enum": [
                    "Money Laundering",
                    "Terrorist Financing",
                    "Financial Fraud",
                    "Organized Crime"
                  ],
                  "title": "Category of Adverse",
                  "group": "Declaration"
                }
              },
              "required": ["adverse_category"]
            }
          },
          "customer_introduce_by": {
            "oneOf": [
              {
                "properties": {
                  "customer_introduce_by": {
                    "enum": ["Bank Staff"]
                  },
                  "employee_id": {
                    "type": "string",
                    "title": "Bank Staff CIF Number",
                    "group": "statusOfClient",
                    "width": 8
                  }
                },
                "required": ["employee_id"]
              },
              {
                "properties": {
                  "customer_introduce_by": {
                    "enum": ["Other Account Holder"]
                  },
                  "introducer_account_number": {
                    "type": "string",
                    "title": "Introducer Account Number",
                    "group": "statusOfClient",
                    "pattern": "^[0-9]{14}$",
                    "message": "Must be of 14 Digits",
                    "width": 8,
                    "errorMessage": {
                      "pattern": "Must be of 14 Digits"
                    }
                  }
                },
                "required": ["introducer_account_number"]
              },
              {
                "properties": {
                  "customer_introduce_by": {
                    "enum": ["Walk-in Customer", "Local Government Bodies"]
                  }
                },
                "required": []
              }
            ]
          }
        }
      }
    }
  }
}
