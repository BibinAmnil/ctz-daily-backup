{
  "type": "object",
  "className": "fs-1",
  "singleForm": true,
  "hasStep": true,
  "form_title": "joint_info",
  "submissionHidden": false,
  "isDisabled": false,
  "required": [],

  "properties": {
    "account_info": {
      "type": "string",
      "group": "Account Information",
      "hideTitle": true,
      "width": "full",
      "readOnly": true
    },

    "is_minor_account": {
      "type": "boolean",
      "title": "Is Minor Account?",
      "width": 4,
      "readOnly": true
    },

    "first_name": {
      "type": "string",
      "title": "First Name",
      "hideTitle": true
    },
    "middle_name": {
      "type": "string",
      "title": "Middle Name",
      "hideTitle": true
    },
    "last_name": {
      "type": "string",
      "title": "Last Name",
      "hideTitle": true
    },

    "id_type_details": {
      "type": "array",
      "title": "Identification Detail",
      "group": "Identification Detail",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "id_type_id": {
            "type": "string",
            "title": "Identification",
            "hideTitle": true,
            "group": "Identification Detail"
          },

          "disable": {
            "type": "boolean",
            "title": "Disable",
            "hideTitle": true,
            "group": "Identification Detail"
          },
          "removable": {
            "type": "boolean",
            "title": "Removable",
            "hideTitle": true,
            "group": "Identification Detail"
          }
        },
        "required": ["id_type_id"],
        "dependencies": {
          "id_type_id": {
            "properties": {
              "id_type_id": {
                "type": "string"
              },
              "issuing_authority": {
                "type": "string",
                "title": "Issuing Authority",
                "group": "Identification Detail",
                "hideTitle": true
              },
              "identification_number": {
                "type": "string",
                "title": "Identity Number",
                "hideTitle": true,
                "group": "Identification Detail",
                "pattern": "^(?!.*//)(?!.*--)(?!.*\\(\\()(?!.*\\)\\))[0-9a-zA-Z/().-]*$",
                "errorMessage": {
                  "pattern": "Only alphanumeric characters and single symbols [/, -, ., ()] are allowed."
                }
              },
              "issue_country": {
                "type": "string",
                "title": "Country Of Issue",
                "group": "Identification Detail",
                "default": "NP",
                "hideTitle": true
              },
              "issued_district": {
                "type": "string",
                "title": "Place Of Issue",
                "group": "Identification Detail",
                "hideTitle": true
              },

              "id_issued_date_ad": {
                "type": "string",
                "title": "Issued Date (A.D)",
                "hideTitle": true,
                "group": "Identification Detail"
              },
              "id_issued_date_bs": {
                "type": "string",
                "title": "Issued Date (B.S)",
                "hideTitle": true,
                "group": "Identification Detail"
              }
            },
            "required": [
              "identification_number",
              "issue_country",
              "issued_district",
              "issuing_authority",
              "id_issued_date_ad",
              "id_issued_date_bs"
            ],
            "dependencies": {
              "id_type_id": {
                "if": {
                  "properties": {
                    "id_type_id": {
                      "enum": ["DL", "PP", "SSC", "VOT", "WPN", "VISA", "NRN"]
                    }
                  }
                },
                "then": {
                  "properties": {
                    "id_expiry_date_ad": {
                      "type": "string",
                      "title": "Expiry Date (A.D)",
                      "hideTitle": true,
                      "group": "Identification Detail"
                    },
                    "id_expiry_date_bs": {
                      "type": "string",
                      "title": "Expiry Date (B.S)",
                      "hideTitle": true,
                      "group": "Identification Detail"
                    }
                  },
                  "required": ["id_expiry_date_ad", "id_expiry_date_bs"]
                }
              }
            }
          }
        }
      }
    }
  },

  "dependencies": {
    "is_minor_account": {
      "if": {
        "properties": {
          "is_minor_account": {
            "const": false
          }
        }
      },
      "then": {
        "required": [],

        "properties": {
          "nationality": {
            "type": "string",
            "title": "Nationality",
            "hideTitle": true
          },
          "date_of_birth_ad": {
            "type": "string",
            "title": "Date of Birth (A.D)",
            "hideTitle": true
          },
          "date_of_birth_bs": {
            "type": "string",
            "title": "Date of Birth (B.S)",
            "hideTitle": true
          }
        },

        "dependencies": {
          "nationality": {
            "if": {
              "properties": {
                "nationality": {
                  "enum": ["NP"]
                }
              }
            },
            "then": {
              "properties": {
                "is_customer_disabled": {
                  "type": "boolean",
                  "title": "Is Customer Disabled or Senior Citizen?",
                  "group": "NationalIDDetail",
                  "default": false,
                  "width": "full"
                },
                "national_id_number": {
                  "type": "string",
                  "title": "National ID Number",
                  "group": "NationalIDDetail"
                },
                "national_id_issue_date_ad": {
                  "type": "string",

                  "title": "National Id Issue Date(A.D)",
                  "group": "NationalIDDetail"
                },
                "national_id_issue_date_bs": {
                  "type": "string",

                  "title": "National Id Issue Date(B.S)",
                  "group": "NationalIDDetail"
                },
                "national_id_issue_place": {
                  "type": "string",
                  "title": "National Id Issue Place",
                  "group": "NationalIDDetail"
                },
                "national_id_issuing_authority": {
                  "type": "string",
                  "title": "Issuing Authority",
                  "group": "NationalIDDetail",
                  "default": "DONICR",
                  "readOnly": true
                },
                "nid_verified": {
                  "type": "string",
                  "title": "NID Verified",
                  "group": "NationalIDDetail",
                  "enum": ["Yes", "No"]
                },
                "nid_verify": {
                  "type": "string",
                  "title": "Verify NID",
                  "group": "NationalIDDetail",
                  "width": 4,
                  "url": "https://citizenportal.donidcr.gov.np/ne/check-national-id-number"
                }
              },
              "dependencies": {
                "is_customer_disabled": {
                  "if": {
                    "properties": {
                      "is_customer_disabled": {
                        "const": true
                      }
                    }
                  },
                  "then": {},
                  "else": {
                    "properties": {},
                    "required": [
                      "national_id_number",
                      "national_id_issue_date_ad",
                      "national_id_issue_date_bs",
                      "national_id_issue_place",
                      "national_id_issuing_authority",
                      "nid_verified"
                    ]
                  }
                }
              },
              "required": []
            }
          }
        }
      },
      "else": {
        "required": [],

        "properties": {
          "nationality": {
            "type": "string",
            "title": "Nationality",
            "hideTitle": true
          },
          "date_of_birth_ad": {
            "type": "string",
            "title": "Date of Birth (A.D)",
            "hideTitle": true
          },
          "date_of_birth_bs": {
            "type": "string",
            "title": "Date of Birth (B.S)",
            "hideTitle": true
          }
        },

        "dependencies": {}
      }
    }
  }
}
