{
  "type": "object",
  "className": "fs-1",
  "singleForm": true,
  "hasStep": false,
  "form_title": "joint_ecdd",
  "submissionHidden": false,
  "required": ["high_risk_category"],
  "properties": {
    "pep": {
      "type": "string",
      "title": "Is the customer Politically Exposed Person (PEP) ?",
      "group": "PEP Section",
      "enum": ["Yes", "No"],
      "readOnly": true
    },
    "occupation_type": {
      "type": "string",
      "title": "Type of occupation",
      "group": "OccupationProfessionBusinessDetails",
      "readOnly": true
    },

    "address_verification": {
      "type": "string",
      "title": "Address verification has been made through",
      "group": "Address Verification",
      "enum": [
        "address matched with identification document",
        "utility bill",
        "physical verification by the bank official",
        "Government employee ID received",
        "Not verified"
      ]
    },
    "is_identified_as_beneficiary_owner": {
      "type": "string",
      "title": "Is beneficial owner has been identified in this account? ",
      "enum": ["Yes", "No"],
      "group": "Beneficiary Owner"
    },
    "screening_result_matched_adverse_media": {
      "type": "string",
      "title": "If screening result matched with adverse media?",
      "enum": ["Yes", "No"],
      "group": "Screening - Adverse Media"
    },
    "nationality": {
      "type": "string",
      "title": "Nationality",
      "group": "Other Information",
      "default": "NP"
    },
    "high_risk_category": {
      "type": "string",
      "title": "High Risk Category",
      "group": "Risk"
    },
    "risk_score": {
      "type": "number",
      "title": "Risk Score",
      "group": "Risk",
      "readOnly": true
    },
    "approval_status": {
      "type": "string",
      "enum": ["Approve", "Reject", "Revert"],
      "width": "half",
      "title": "Approval Status",
      "group": ""
    },
    "approval_remarks": {
      "type": "string",
      "width": "half",
      "title": "Approval Remarks",
      "group": ""
    }
  },
  "dependencies": {
    "pep": {
      "if": {
        "properties": {
          "pep": {
            "enum": ["Yes"]
          }
        }
      },
      "then": {
        "properties": {
          "pep_category": {
            "type": "string",

            "enum": [
              "Existing PEPs",
              "Former PEPs",
              "High-ranking officials from neighboring or nearby countries",
              "Other foreign PEPs",
              "International PEPs"
            ],
            "title": "Pep Category",
            "group": "PEP Section"
          },
          "pep_classification": {
            "type": "string",
            "title": "Classification of PEP",

            "group": "PEP Section",
            "enum": ["Self", "Family Member", "Associate PEP"]
          },
          "pep_name_involvement": {
            "type": "string",
            "title": "Name of PEP involvement",

            "group": "PEP Section"
          },
          "pep_family_account_with_bank": {
            "type": "string",
            "title": "Do the account holder's family members maintain account with any of our bank branches?",
            "group": "PEP Section",
            "enum": ["Yes", "No"]
          }
        },
        "required": ["pep_category"],
        "dependencies": {
          "pep_category": {
            "if": {
              "properties": {
                "pep_category": {
                  "enum": ["Former PEPs"]
                }
              }
            },
            "then": {
              "properties": {
                "pep_retirement_date_ad": {
                  "type": "string",

                  "title": "Date of Retirement (PEP) (A.D)",
                  "group": "PEP Section"
                },
                "pep_retirement_date_bs": {
                  "type": "string",
                  "readOnly": true,
                  "title": "Date of Retirement (PEP) (B.S)",
                  "group": "PEP Section"
                }
              }
            }
          },
          "pep_family_account_with_bank": {
            "if": {
              "properties": {
                "pep_family_account_with_bank": {
                  "enum": ["Yes"]
                }
              }
            },
            "then": {
              "properties": {
                "pep_related_member_account_number": {
                  "type": "string",
                  "title": "Account Number",
                  "group": "PEP Section"
                },
                "pep_related_member_account_name": {
                  "type": "string",
                  "title": "Account Name",
                  "group": "PEP Section"
                },
                "pep_related_member_relationship": {
                  "type": "string",
                  "title": "Relation with account holder",
                  "group": "PEP Section"
                },
                "pep_related_member_risk_category": {
                  "type": "string",

                  "enum": [
                    "Existing PEPs",
                    "Former PEPs",
                    "High-ranking officials from neighboring or nearby countries",
                    "Other foreign PEPs",
                    "International PEPs"
                  ],
                  "title": "Risk Category",
                  "group": "PEP Section"
                },
                "pep_related_member_recommended_to_change": {
                  "type": "string",

                  "enum": ["High Risk"],
                  "title": "Recommended to change Risk Category",
                  "group": "PEP Section"
                }
              }
            }
          }
        }
      }
    },
    "occupation_type": {
      "if": {
        "properties": {
          "occupation_type": {
            "not": {
              "enum": ["4373600c-8c46-4fe5-ad12-13cb189cad87"]
            }
          }
        }
      },
      "then": {
        "properties": {
          "source_of_income": {
            "type": "string",
            "title": "Type of Income Source",
            "group": "OccupationProfessionBusinessDetails",
            "readOnly": true
          },

          "yearly_income": {
            "type": "string",
            "title": "Estimated Annual Income",
            "readOnly": true
          }
        }
      },
      "else": {
        "if": {
          "properties": {
            "occupation_type": {
              "enum": ["4373600c-8c46-4fe5-ad12-13cb189cad87"]
            }
          }
        },
        "then": {
          "properties": {
            "occupation_profession_business_details": {
              "type": "array",
              "title": "Occupation / Profession / Business Details",
              "minItems": 1,
              "items": {
                "type": "object",
                "properties": {
                  "name_of_organization": {
                    "type": "string",
                    "title": "Name Of Organization",
                    "pattern": "^[a-zA-Z.\\s]+$",
                    "errorMessage": {
                      "pattern": "Alphabets, dot and spaces only"
                    }
                  },
                  "organization_full_address": {
                    "type": "string",
                    "title": "Organization Full Address",
                    "pattern": "^[a-zA-Z0-9\\s]+$",
                    "errorMessage": {
                      "pattern": "Alphabets, number and spaces only"
                    }
                  },
                  "contact_number": {
                    "type": "string",
                    "title": "Contact Numbers",
                    "pattern": "^[0-9]{7,12}$",
                    "errorMessage": {
                      "pattern": "Mobile number must be 7 to 12 digits."
                    }
                  },
                  "nature_of_business": {
                    "type": "string",
                    "title": "Nature of Business"
                  },
                  "designation": {
                    "type": "string",
                    "title": "Designation",
                    "pattern": "^[a-zA-Z\\s]+$",
                    "errorMessage": {
                      "pattern": "Alphabets and spaces only"
                    }
                  },
                  "estimated_income": {
                    "type": "string",
                    "title": "Estimated Annual Income"
                  }
                }
              }
            }
          }
        }
      }
    },
    "source_of_income": {
      "if": {
        "properties": {
          "source_of_income": {
            "enum": ["16294a63-09b3-4d0c-afee-7b51051802c4"]
          }
        }
      },
      "then": {
        "properties": {
          "earner_name": {
            "type": "string",

            "title": "Name of the person who earns",
            "group": "OccupationProfessionBusinessDetails",
            "readOnly": true
          },
          "earner_relationship": {
            "type": "string",

            "title": "Relationship",
            "group": "OccupationProfessionBusinessDetails",
            "readOnly": true
          }
        }
      },
      "else": {
        "if": {
          "properties": {
            "source_of_income": {
              "enum": ["c64e5038-a57a-490d-af92-40e3f0fb0835"]
            },
            "readOnly": true
          }
        },
        "then": {
          "properties": {
            "earner_remittance_country": {
              "type": "string",

              "title": "Remittance Country",
              "group": "OccupationProfessionBusinessDetails",
              "readOnly": true
            },
            "earner_nature_of_job": {
              "type": "string",

              "title": "Nature of job of Remitters",
              "group": "OccupationProfessionBusinessDetails",
              "readOnly": true
            },
            "earner_status": {
              "type": "string",

              "title": "Status of workers",
              "group": "OccupationProfessionBusinessDetails",
              "readOnly": true
            }
          }
        }
      }
    },
    "address_verification": {
      "if": {
        "properties": {
          "address_verification": {
            "enum": ["physical verification by the bank official"]
          }
        }
      },
      "then": {
        "properties": {
          "employee_id": {
            "type": "string",

            "title": "Employee ID of the staff",
            "group": "Address Verification"
          },
          "employee_name": {
            "type": "string",

            "title": "Name of staff",
            "group": "Address Verification"
          },
          "employee_address_verification_date_ad": {
            "type": "string",

            "title": "Address Verification Date (A.D)",
            "group": "Address Verification"
          },
          "employee_address_verification_date_bs": {
            "type": "string",

            "title": "Address Verification Date (B.S)",
            "group": "Address Verification"
          }
        }
      }
    },
    "is_identified_as_beneficiary_owner": {
      "if": {
        "properties": {
          "is_identified_as_beneficiary_owner": {
            "enum": ["Yes"]
          }
        }
      },
      "then": {
        "properties": {
          "beneficiary_owner_has_kyc": {
            "type": "string",
            "title": "KYC of Beneficial Owner has been obtained",
            "group": "Beneficiary Owner",

            "enum": ["Yes", "No"]
          },
          "beneficiary_owner_has_id": {
            "type": "string",
            "title": "ID of the Beneficial Owner has been obtained",
            "group": "Beneficiary Owner",

            "enum": ["Yes", "No"]
          },
          "beneficiary_owner_has_screening": {
            "type": "string",
            "title": "Screening has been done",
            "group": "Beneficiary Owner",

            "enum": ["Yes", "No"]
          }
        }
      }
    },
    "screening_result_matched_adverse_media": {
      "if": {
        "properties": {
          "screening_result_matched_adverse_media": {
            "enum": ["Yes"]
          }
        }
      },
      "then": {
        "properties": {
          "adverse_category": {
            "type": "string",

            "enum": [
              "Money laundering",
              "Banking fraud",
              "Bribery and corruption",
              "Organized crime",
              "Drug trafficking",
              "Human trafficking",
              "Wildlife trafficking",
              "Proliferation and proliferation financing",
              "Tax evasion"
            ],

            "title": "Category of Adverse",
            "group": "Screening - Adverse Media"
          },
          "adverse_status": {
            "type": "string",

            "enum": ["Allegation", "Investigation", "Charged", "Conviction"],

            "title": "Adverse Status",
            "group": "Screening - Adverse Media"
          }
        },
        "required": ["adverse_category"]
      }
    },
    "nationality": {
      "if": {
        "properties": {
          "nationality": {
            "not": {
              "enum": ["NP"]
            }
          }
        }
      },
      "then": {
        "properties": {
          "purpose_of_account_open": {
            "type": "string",
            "title": "Purpose of A/C open",
            "enum": ["Yes", "No"],
            "group": "Other Information"
          },
          "purpose_of_visit": {
            "type": "string",
            "title": "Purpose of visit",
            "group": "Other Information"
          },
          "visa_expiry_date_ad": {
            "type": "string",

            "title": "Visa Expiry Date (A.D)",
            "group": "Other Information"
          },
          "visa_expiry_date_bs": {
            "type": "string",

            "title": "Visa Expiry Date (B.S)",
            "group": "Other Information"
          },
          "passport_expiry_date_ad": {
            "type": "string",

            "title": "Passport Expiry Date (A.D)",
            "group": "Other Information"
          },
          "passport_expiry_date_bs": {
            "type": "string",

            "title": "Passport Expiry Date (B.S)",
            "group": "Other Information"
          },
          "employer_confirmation": {
            "type": "string",
            "title": "Confirmation from employer or approval from Nepal Government",
            "group": "Other Information",
            "enum": ["Yes", "No"]
          },

          "mandatee_not_family_member": {
            "type": "string",
            "title": "Account operated by mandatee who is not the family member of account holder",
            "group": "Other Information",
            "enum": ["Yes", "No"]
          }
        },
        "dependencies": {
          "mandatee_not_family_member": {
            "if": {
              "properties": {
                "mandatee_not_family_member": {
                  "enum": ["Yes"]
                }
              }
            },
            "then": {
              "properties": {
                "mandatee_intent_for_account_opening": {
                  "type": "string",
                  "width": "full",
                  "title": "Please specify the intended purpose to assign the mandatee/Power of attorney for account operation",
                  "group": "Other Information"
                }
              }
            }
          }
        }
      }
    },
    "approval_status": {
      "if": {
        "properties": {
          "approval_status": {
            "enum": ["Revert"]
          }
        }
      },
      "then": {
        "properties": {
          "revert_to": {
            "type": "string",
            "title": "Revert To",
            "width": "half"
          }
        },
        "required": ["revert_to"]
      }
    }
  }
}
