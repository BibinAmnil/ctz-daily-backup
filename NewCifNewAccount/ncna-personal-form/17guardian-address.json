{
  "type": "object",
  "className": "fs-1",
  "singleForm": true,
  "hasStep": true,
  "form_title": "guardian_info",
  "isDisabled": false,
  "submissionHidden": false,
  "required": ["guardian_nationality", "guardian_contact_type"],

  "properties": {
    "account_info": {
      "type": "string",
      "width": "full",
      "group": "Guardian Account Information",
      "hideTitle": true
    },
    "is_minor_account": {
      "type": "boolean",
      "width": "full",
      "group": "Guardian Account Information",
      "default": false,
      "hideTitle": true
    },

    "guardian_nationality": {
      "type": "string",
      "title": "Nationality",
      "group": "Guardian Account Information",
      "default": "NP",
      "readOnly": false,
      "hideTitle": true
    },

    "guardian_contact_type": {
      "type": "string",
      "title": "Contact Number Type",
      "group": "Guardian Contact Detail",
      "enum": [
        "No Contact Detail",
        "Mobile Number",
        "Phone Number",
        "Both Contact Detail"
      ]
    }
  },

  "dependencies": {
    "guardian_contact_type": {
      "oneOf": [
        {
          "properties": {
            "guardian_contact_type": {
              "enum": ["Phone Number"]
            },
            "guardian_phone_country_code": {
              "type": "string",
              "title": "Code",
              "group": "Guardian Contact Detail",
              "width": 4,
              "default": "NEPAL"
            },
            "guardian_phone_number": {
              "type": "number",
              "title": "Phone Number",
              "group": "Guardian Contact Detail",
              "pattern": "^(\\d{7,12})?$",
              "width": 5,
              "errorMessage": {
                "pattern": "Mobile number must be 7 to 12 digits."
              }
            }
          },
          "required": ["guardian_phone_country_code", "guardian_phone_number"]
        },
        {
          "properties": {
            "guardian_contact_type": {
              "enum": ["Mobile Number"]
            },
            "guardian_mobile_country_code": {
              "type": "string",
              "title": "Code",
              "group": "Guardian Contact Detail",
              "width": 4,
              "default": "NEPAL"
            }
          },
          "dependencies": {
            "guardian_mobile_country_code": {
              "if": {
                "properties": {
                  "guardian_mobile_country_code": {
                    "enum": ["NEPAL"]
                  }
                }
              },
              "then": {
                "properties": {
                  "guardian_mobile_number": {
                    "type": "number",
                    "title": "Mobile Number",
                    "group": "Guardian Contact Detail",
                    "pattern": "^(\\d{10})?$",
                    "errorMessage": {
                      "pattern": "Mobile number must be 10 digits."
                    }
                  }
                },
                "required": ["guardian_mobile_number"]
              },
              "else": {
                "properties": {
                  "guardian_mobile_number": {
                    "type": "number",
                    "title": "Mobile Number",
                    "group": "Guardian Contact Detail",
                    "pattern": "^(\\d{7,12})?$",
                    "errorMessage": {
                      "pattern": "Mobile number must be 7 to 12 digits."
                    }
                  }
                },
                "required": ["guardian_mobile_number"]
              }
            }
          },
          "required": ["guardian_mobile_country_code"]
        },
        {
          "properties": {
            "guardian_contact_type": {
              "enum": ["Both Contact Detail"]
            },
            "guardian_phone_country_code": {
              "type": "string",
              "title": "Code",
              "group": "Guardian Contact Detail",
              "width": 4,
              "default": "NEPAL"
            },
            "guardian_phone_number": {
              "type": "number",
              "title": "Phone Number",
              "group": "Guardian Contact Detail",
              "pattern": "^(\\d{7,12})?$",
              "width": 5,
              "errorMessage": {
                "pattern": "Mobile number must be 7 to 12 digits."
              }
            },
            "guardian_mobile_country_code": {
              "type": "string",
              "title": "Code",
              "group": "Guardian Contact Detail",
              "width": 4,
              "default": "NEPAL"
            }
          },
          "required": [
            "guardian_phone_country_code",
            "guardian_phone_number",
            "guardian_mobile_country_code"
          ],
          "dependencies": {
            "guardian_mobile_country_code": {
              "if": {
                "properties": {
                  "guardian_mobile_country_code": {
                    "enum": ["NEPAL"]
                  }
                }
              },
              "then": {
                "properties": {
                  "guardian_mobile_number": {
                    "type": "number",
                    "title": "Mobile Number",
                    "group": "Guardian Contact Detail",
                    "pattern": "^(\\d{10})?$",
                    "width": 5,

                    "errorMessage": {
                      "pattern": "Mobile number must be 10 digits."
                    }
                  }
                },
                "required": ["guardian_mobile_number"]
              },
              "else": {
                "properties": {
                  "guardian_mobile_number": {
                    "type": "number",
                    "title": "Mobile Number",
                    "group": "Guardian Contact Detail",
                    "pattern": "^(\\d{7,12})?$",
                    "width": 5,

                    "errorMessage": {
                      "pattern": "Mobile number must be 7 to 12 digits."
                    }
                  }
                },
                "required": ["guardian_mobile_number"]
              }
            }
          }
        },
        {
          "properties": {
            "guardian_contact_type": {
              "enum": ["No Contact Detail"]
            }
          }
        }
      ]
    },

    "guardian_nationality": {
      "if": {
        "properties": {
          "guardian_nationality": {
            "enum": ["NP"]
          }
        }
      },
      "then": {
        "properties": {
          "guardian_permanent_country": {
            "type": "string",
            "title": "Permanent Country",
            "group": "Guardian Permanent Address",
            "default": "NP",
            "readOnly": true
          },
          "guardian_same_as_permanent": {
            "type": "boolean",
            "title": "Same As Permanent Address",
            "group": "Guardian Current Address",
            "width": "full",
            "default": false
          },
          "guardian_current_country": {
            "type": "string",
            "title": "Current Country",
            "group": "Guardian Current Address",
            "default": "NP"
          }
        },
        "dependencies": {
          "guardian_permanent_country": {
            "if": {
              "properties": {
                "guardian_permanent_country": {
                  "enum": ["NP"]
                }
              }
            },
            "then": {
              "properties": {
                "guardian_permanent_province": {
                  "type": "string",
                  "title": "Permanent Province",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_district": {
                  "type": "string",
                  "title": "Permanent District",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_municipality": {
                  "type": "string",
                  "title": "Permanent Municipality",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_ward_number": {
                  "type": "string",
                  "title": "Ward No",
                  "group": "Guardian Permanent Address",
                  "enum": [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                    "6",
                    "7",
                    "8",
                    "9",
                    "10",
                    "11",
                    "12",
                    "13",
                    "14",
                    "15",
                    "16",
                    "17",
                    "18",
                    "19",
                    "20",
                    "21",
                    "22",
                    "23",
                    "24",
                    "25",
                    "26",
                    "27",
                    "28",
                    "29",
                    "30",
                    "31",
                    "32",
                    "33"
                  ]
                },
                "guardian_permanent_street_name": {
                  "type": "string",
                  "title": "Tole/Street",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_town": {
                  "type": "string",
                  "title": "Town",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_house_number": {
                  "type": "string",
                  "title": "House No",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                }
              },
              "required": [
                "guardian_permanent_province",
                "guardian_permanent_district",
                "guardian_permanent_municipality",
                "guardian_permanent_ward_number",
                "guardian_permanent_street_name",
                "guardian_permanent_town"
              ]
            },
            "else": {
              "properties": {
                "guardian_permanent_outside_town": {
                  "type": "string",
                  "title": "Town",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_outside_street_name": {
                  "type": "string",
                  "title": "Tole/Street",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_postal_code": {
                  "type": "string",
                  "title": "Postal Code",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9\\s]{0,10}$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed (Max 10 Digits)."
                  }
                }
              },
              "required": [
                "guardian_permanent_outside_town",
                "guardian_permanent_outside_street_name",
                "guardian_permanent_postal_code"
              ]
            }
          }
        },
        "required": ["guardian_permanent_country"]
      },
      "else": {
        "properties": {
          "guardian_permanent_country": {
            "type": "string",
            "title": "Permanent Country",
            "group": "Guardian Permanent Address"
          },
          "guardian_same_as_permanent": {
            "type": "boolean",
            "title": "Same As Permanent Address",
            "group": "Guardian Current Address",
            "width": "full"
          },
          "guardian_current_country": {
            "type": "string",
            "title": "Current Country",
            "group": "Guardian Current Address",
            "default": "NP"
          }
        },
        "dependencies": {
          "guardian_permanent_country": {
            "if": {
              "properties": {
                "guardian_permanent_country": {
                  "enum": ["NP"]
                }
              }
            },
            "then": {
              "properties": {
                "guardian_permanent_province": {
                  "type": "string",
                  "title": "Permanent Province",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_district": {
                  "type": "string",
                  "title": "Permanent District",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_municipality": {
                  "type": "string",
                  "title": "Permanent Municipality",
                  "group": "Guardian Permanent Address"
                },
                "guardian_permanent_ward_number": {
                  "type": "string",
                  "title": "Ward No",
                  "group": "Guardian Permanent Address",
                  "enum": [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                    "6",
                    "7",
                    "8",
                    "9",
                    "10",
                    "11",
                    "12",
                    "13",
                    "14",
                    "15",
                    "16",
                    "17",
                    "18",
                    "19",
                    "20",
                    "21",
                    "22",
                    "23",
                    "24",
                    "25",
                    "26",
                    "27",
                    "28",
                    "29",
                    "30",
                    "31",
                    "32",
                    "33"
                  ]
                },
                "guardian_permanent_street_name": {
                  "type": "string",
                  "title": "Tole/Street",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_town": {
                  "type": "string",
                  "title": "Town",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_house_number": {
                  "type": "string",
                  "title": "House No",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                }
              },
              "required": [
                "guardian_permanent_province",
                "guardian_permanent_district",
                "guardian_permanent_municipality",
                "guardian_permanent_ward_number",
                "guardian_permanent_street_name",
                "guardian_permanent_town"
              ]
            },
            "else": {
              "properties": {
                "guardian_permanent_outside_town": {
                  "type": "string",
                  "title": "Town",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_outside_street_name": {
                  "type": "string",
                  "title": "Tole/Street",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed."
                  }
                },
                "guardian_permanent_postal_code": {
                  "type": "string",
                  "title": "Postal Code",
                  "group": "Guardian Permanent Address",
                  "pattern": "^[a-zA-Z0-9\\s]{0,10}$",
                  "errorMessage": {
                    "pattern": "Only alphanumeric characters and spaces are allowed (Max 10 Digits)."
                  }
                }
              },
              "required": [
                "guardian_permanent_outside_town",
                "guardian_permanent_outside_street_name",
                "guardian_permanent_postal_code"
              ]
            }
          }
        },
        "required": ["guardian_permanent_country"]
      }
    },

    "guardian_current_country": {
      "oneOf": [
        {
          "properties": {
            "guardian_current_country": {
              "enum": ["NP"]
            },
            "guardian_same_as_permanent": {
              "type": "boolean",
              "title": "Same As Permanent Address",
              "group": "Guardian Current Address",
              "width": "full"
            },
            "guardian_current_province": {
              "type": "string",
              "title": "Current Province",
              "group": "Guardian Current Address",
              "masterDataKey": "provinces"
            },
            "guardian_current_district": {
              "type": "string",
              "title": "Current District",
              "group": "Guardian Current Address",
              "masterDataKey": "districts"
            },
            "guardian_current_municipality": {
              "type": "string",
              "title": "Current Municipality",
              "group": "Guardian Current Address",
              "masterDataKey": "local_bodies"
            },
            "guardian_current_ward_number": {
              "type": "string",
              "title": "Ward No",
              "group": "Guardian Current Address",
              "enum": [
                "1",
                "2",
                "3",
                "4",
                "5",
                "6",
                "7",
                "8",
                "9",
                "10",
                "11",
                "12",
                "13",
                "14",
                "15",
                "16",
                "17",
                "18",
                "19",
                "20",
                "21",
                "22",
                "23",
                "24",
                "25",
                "26",
                "27",
                "28",
                "29",
                "30",
                "31",
                "32",
                "33"
              ]
            },
            "guardian_current_street_name": {
              "type": "string",
              "title": "Tole/Street",
              "group": "Guardian Current Address",
              "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed."
              }
            },
            "guardian_current_town": {
              "type": "string",
              "title": "Town",
              "group": "Guardian Current Address",
              "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed."
              }
            },
            "guardian_current_house_number": {
              "type": "string",
              "title": "House No",
              "group": "Guardian Current Address",
              "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed."
              }
            }
          },
          "dependencies": {
            "guardian_same_as_permanent": {
              "if": {
                "properties": {
                  "guardian_same_as_permanent": {
                    "const": true
                  }
                }
              },
              "then": {
                "properties": {
                  "guardian_current_country": {
                    "readOnly": true
                  },
                  "guardian_current_province": {
                    "readOnly": true
                  },
                  "guardian_current_district": {
                    "readOnly": true
                  },
                  "guardian_current_municipality": {
                    "readOnly": true
                  },
                  "guardian_current_ward_number": {
                    "readOnly": true
                  },
                  "guardian_current_street_name": {
                    "readOnly": true
                  },
                  "guardian_current_town": {
                    "readOnly": true
                  },
                  "guardian_current_house_number": {
                    "readOnly": true
                  }
                }
              }
            }
          },
          "required": [
            "guardian_current_province",
            "guardian_current_district",
            "guardian_current_municipality",
            "guardian_current_ward_number",
            "guardian_current_street_name",
            "guardian_current_town"
          ]
        },
        {
          "properties": {
            "guardian_current_country": {
              "not": {
                "enum": ["NP"]
              }
            },
            "guardian_same_as_permanent": {
              "type": "boolean",
              "title": "Same As Permanent Address",
              "group": "Guardian Current Address",
              "width": "full"
            },
            "guardian_current_outside_town": {
              "type": "string",
              "title": "Outside Town",
              "group": "Guardian Current Address",
              "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed."
              }
            },
            "guardian_current_outside_street_name": {
              "type": "string",
              "title": "Outside Tole/Street",
              "group": "Guardian Current Address",
              "pattern": "^[a-zA-Z0-9/\\.\\-,\\s]*$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed."
              }
            },
            "guardian_current_postal_code": {
              "type": "string",
              "title": "Postal Code",
              "group": "Guardian Current",
              "pattern": "^[a-zA-Z0-9\\s]{0,10}$",
              "errorMessage": {
                "pattern": "Only alphanumeric characters and spaces are allowed (Max 10 Digits)."
              }
            }
          },
          "required": [
            "guardian_current_outside_town",
            "guardian_current_outside_street_name",
            "guardian_current_postal_code"
          ],
          "dependencies": {
            "guardian_same_as_permanent": {
              "if": {
                "properties": {
                  "guardian_same_as_permanent": {
                    "const": true
                  }
                }
              },
              "then": {
                "properties": {
                  "guardian_current_country": {
                    "readOnly": true
                  },
                  "guardian_current_outside_town": {
                    "readOnly": true
                  },
                  "guardian_current_outside_street_name": {
                    "readOnly": true
                  },
                  "guardian_current_postal_code": {
                    "readOnly": true
                  }
                }
              }
            }
          }
        }
      ]
    }
  }
}
